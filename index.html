<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<title>数学运算训练游戏</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>
<div class="container">
  <h1>🎯 数学运算训练游戏</h1>
  
  <!-- 设置按钮 -->
  <div style="text-align: center; margin: 20px 0; display: none;" id="settingsButton">
    <button class="btn btn-primary" onclick="openSettingsModal()" style="background: #34c759; border-color: #34c759;">⚙️ 游戏设置</button>
  </div>
  
  <!-- 模态对话框 -->
  <div id="settingsModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeSettingsModal()">&times;</span>
      <div class="modal-header">
        <h2>游戏副本设置</h2>
      </div>
      <div class="modal-body">
        <!-- 范围选择 -->
        <div class="setting-section">
          <h3>🎯 范围选择</h3>
          <div class="options-grid">
            <button class="option-btn active" onclick="modalSelectRange(10)" id="modalRange10">10</button>
            <button class="option-btn" onclick="modalSelectRange(50)" id="modalRange50">50</button>
            <button class="option-btn" onclick="modalSelectRange(100)" id="modalRange100">100</button>
          </div>
          <div class="custom-input-group">
            <label for="modalCustomRangeInput">自定义范围：</label>
            <input type="number" id="modalCustomRangeInput" class="custom-input" min="1" max="1000" value="10" oninput="updateModalCustomRange()">
            <button class="set-btn" onclick="setModalCustomRange()">设置</button>
          </div>
        </div>
        
        <!-- 类型选择 -->
        <div class="setting-section">
          <h3>🧮 运算类型</h3>
          <div class="options-grid">
            <button class="option-btn active" onclick="modalSelectOperation('multiplication')" id="modalOpMultiplication">乘法</button>
            <button class="option-btn" onclick="modalSelectOperation('addition')" id="modalOpAddition">加法</button>
            <button class="option-btn" onclick="modalSelectOperation('subtraction')" id="modalOpSubtraction">减法</button>
            <button class="option-btn" onclick="modalSelectOperation('division')" id="modalOpDivision">除法</button>
          </div>
        </div>
        
        <!-- 难度选择 -->
        <div class="setting-section">
          <h3>⚡ 难度选择</h3>
          <div class="options-grid" id="modalDifficultyOptions">
            <button class="option-btn active" onclick="modalSelectDifficulty('noCarry')" id="modalDiffNoCarry">不进位</button>
            <button class="option-btn" onclick="modalSelectDifficulty('carry')" id="modalDiffCarry">进位</button>
          </div>
        </div>
        
        <!-- 时间选择 -->
        <div class="setting-section">
          <h3>⏱️ 游戏时长</h3>
          <div class="options-grid">
            <button class="option-btn" onclick="modalSelectTime(60, this)">1分钟</button>
            <button class="option-btn active" onclick="modalSelectTime(120, this)">2分钟</button>
            <button class="option-btn" onclick="modalSelectTime(180, this)">3分钟</button>
            <button class="option-btn" onclick="modalSelectTime(300, this)">5分钟</button>
          </div>
          <div class="custom-input-group">
            <label for="modalCustomTimeInput">自定义时间（秒）：</label>
            <input type="number" id="modalCustomTimeInput" class="custom-input" min="30" max="1800" value="120">
            <button class="set-btn" onclick="setModalCustomTime()">设置</button>
          </div>
        </div>
      </div>
      <div style="text-align: center; padding-top: 20px;">
        <div style="margin-bottom: 15px; text-align: left;">
          <label style="display: flex; align-items: center; cursor: pointer;">
            <input type="checkbox" id="alwaysShowSettings" style="margin-right: 10px; transform: scale(1.2);">
            <span>每次启动时都显示设置对话框</span>
          </label>
        </div>
        <button class="btn btn-primary" onclick="saveSettingsAndClose()" style="padding: 12px 30px; font-size: 16px;">保存设置</button>
      </div>
    </div>
  </div>
  
  <div class="settings-section" id="gameSettings" style="display: none;">
    <!-- 范围选择 -->
    <div class="setting-group">
      <h3 style="color: #1d1d1f; font-size: 18px; margin-bottom: 15px;">🎯 范围选择</h3>
      <div class="options-row">
        <button class="setting-btn active" onclick="selectRange(10)" id="range10">10</button>
        <button class="setting-btn" onclick="selectRange(50)" id="range50">50</button>
        <button class="setting-btn" onclick="selectRange(100)" id="range100">100</button>
        <div class="custom-range">
          <label for="customRangeInput" style="color: #8e8e93; font-size: 14px;">自定义：</label>
          <input type="number" id="customRangeInput" min="1" max="1000" value="10" style="width: 80px; padding: 8px; border: 1px solid #d1d1d6; border-radius: 6px; margin: 0 10px; text-align: center;" oninput="updateCustomRange()">
          <button class="btn btn-secondary" onclick="setCustomRange()" style="padding: 8px 16px; font-size: 14px;">设置</button>
        </div>
      </div>
    </div>
    
    <!-- 类型选择 -->
    <div class="setting-group" style="margin-top: 25px;">
      <h3 style="color: #1d1d1f; font-size: 18px; margin-bottom: 15px;">🧮 运算类型</h3>
      <div class="options-row">
        <button class="setting-btn active" onclick="selectOperation('multiplication')" id="opMultiplication">乘法</button>
        <button class="setting-btn" onclick="selectOperation('addition')" id="opAddition">加法</button>
        <button class="setting-btn" onclick="selectOperation('subtraction')" id="opSubtraction">减法</button>
        <button class="setting-btn" onclick="selectOperation('division')" id="opDivision">除法</button>
      </div>
    </div>
    
    <!-- 难度选择 -->
    <div class="setting-group" style="margin-top: 25px;">
      <h3 style="color: #1d1d1f; font-size: 18px; margin-bottom: 15px;">⚡ 难度选择</h3>
      <div class="options-row" id="difficultyOptions">
        <button class="setting-btn active" onclick="selectDifficulty('noCarry')" id="diffNoCarry">不进位</button>
        <button class="setting-btn" onclick="selectDifficulty('carry')" id="diffCarry">进位</button>
      </div>
    </div>
  </div>
  
  <div class="time-settings" id="timeSettings" style="display: none;">
    <h3 style="color: #1d1d1f; font-size: 18px; margin-bottom: 15px;">⏱️ 选择游戏时长</h3>
    <div class="time-options">
      <button class="time-btn" onclick="selectTime(60, this)">1分钟</button>
      <button class="time-btn active" onclick="selectTime(120, this)">2分钟</button>
      <button class="time-btn" onclick="selectTime(180, this)">3分钟</button>
      <button class="time-btn" onclick="selectTime(300, this)">5分钟</button>
    </div>
    <div class="custom-time" style="margin-top: 15px;">
      <label for="customTimeInput" style="color: #8e8e93; font-size: 14px;">自定义时间（秒）：</label>
      <input type="number" id="customTimeInput" min="30" max="1800" value="120" style="width: 80px; padding: 8px; border: 1px solid #d1d1d6; border-radius: 6px; margin: 0 10px; text-align: center;">
      <button class="btn btn-secondary" onclick="setCustomTime()" style="padding: 8px 16px; font-size: 14px;">设置</button>
    </div>
  </div>
  
  <div class="game-info">
    <div class="timer">⏰ 时间: <span id="timeLeft">60</span> 秒</div>
    <div class="score">🌟 得分: <span id="currentScore">0</span></div>
  </div>
  
  <div class="question-area" id="questionArea">
    <div class="question" id="question">点击开始按钮开始游戏！</div>
    <input type="number" class="answer-input" id="answerInput" placeholder="?" style="display: none;" min="0" max="10000">
    <div class="options-container" id="optionsContainer" style="display: none; margin-top: 30px;">
      <div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
        <button class="btn btn-primary" onclick="selectOption('A')" id="optionA"><span id="optionAText">0</span></button>
        <button class="btn btn-primary" onclick="selectOption('B')" id="optionB"><span id="optionBText">0</span></button>
        <button class="btn btn-primary" onclick="selectOption('C')" id="optionC"><span id="optionCText">0</span></button>
      </div>
    </div>
    <div class="feedback" id="feedback"></div>
  </div>

  <div class="buttons">
    <button class="btn btn-primary" id="startBtn" onclick="startGame()" disabled style="opacity: 0.5;">🚀 开始游戏</button>
    <button class="btn btn-secondary" onclick="restartGame()" style="display: none;" id="restartBtn">🔄 重新开始</button>
  </div>
  
  <div class="stats">
    <div class="stat-card">
      <div class="stat-number" id="totalQuestions">0</div>
      <div class="stat-label">总题数</div>
    </div>
    <div class="stat-card">
      <div class="stat-number" id="correctAnswers">0</div>
      <div class="stat-label">答对</div>
    </div>
    <div class="stat-card">
      <div class="stat-number" id="wrongAnswers">0</div>
      <div class="stat-label">答错</div>
    </div>
    <div class="stat-card">
      <div class="stat-number" id="accuracy">0%</div>
      <div class="stat-label">正确率</div>
    </div>
  </div>
  
  <div class="game-over" id="gameOver" style="display: none;">
    <h2>🎉 游戏结束！</h2>
    <div class="final-score" id="finalScore"></div>
    <div id="finalStats"></div>
  </div>
</div>

<script src="js/game.js"></script>
</body>
</html>